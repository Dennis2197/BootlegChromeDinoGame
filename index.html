<!DOCTYPE html>
<html lang="en" onkeydown="jump()">
<head>
    <meta charset="UTF-8">
    <title>Bootleg Dino Game</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<div id="character"></div>
<div id="obstacle"></div>
<div id="score">Score: 0</div>
<button id="start" onclick="startGame()">Start</button>

<script>
    let obstacleLeft = 1000;
    let obstacle = document.getElementById("obstacle");
    let scoreElement = document.getElementById("score");
    let score = 0;

    let character = document.getElementById("character");
    let startbutton = document.getElementById("start")
    let isJumping = false;
    let gamestart = false;
    let speedValue = 1;

    function wait(ms){
        var start = new Date().getTime();
        var end = start;
        while(end < start + ms) {
            end = new Date().getTime();
        }
    }

    function startGame(){
        start.style.top = "-1000px";
        setInterval(id => {
            obstacle.style.left = obstacleLeft + "px";
            obstacleLeft -= speedValue;

            if (score < 10){
                speedValue = 30;
            } else if (score >= 10 && score < 20){
                speedValue = 40;
            } else if (score >= 20 && score < 35) {
                speedValue = 50;
            } else if (score >= 35 && score < 55){
                speedValue = 60;
            } else if (score >= 55){
                speedValue = 70;
            }

            let characterTop = parseInt(character.style.top);
            if (obstacleLeft < 150 && obstacleLeft > 50 && characterTop >= 500) {
                alert("Game over\nScore: " + score);
                clearInterval(id);
                location.reload();
            }

            if (obstacleLeft < 0) {
                obstacleLeft = 1000;
                score++;
                scoreElement.innerText = "Score: " + score;
            }
        }, 50);
    }
    function jump() {
        if (isJumping) return;
        isJumping = true;
        //nice
        let characterTop = 500;
        let goingUp = true;

        let jumpInterval = setInterval(() => {
            if (goingUp) {
                characterTop -= 20;
                if (characterTop <= 220) {
                    goingUp = false;
                }
            } else {
                characterTop += 20;
                if (characterTop >= 500) {
                    clearInterval(jumpInterval);
                    isJumping = false;
                }
            }
            character.style.top = characterTop + "px";
        }, 20);
    }

    document.addEventListener("keydown", jump);
</script>
</body>
</html>